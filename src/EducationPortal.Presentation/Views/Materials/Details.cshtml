@using EducationPortal.Presentation.Extensions
@model EducationPortal.Presentation.ViewModels.Materials.MaterialDetailsViewModel
@{
    ViewData["Title"] = "Material details";
}

<h2 class="mb-1">@Model.Title</h2>
<p class="text-muted">@Model.Type</p>

@if (!string.IsNullOrWhiteSpace(Model.Description))
{
    <p>@Model.Description</p>
}

@if (Model.Type == "Video")
{
    <dl class="row">
        <dt class="col-sm-3">Duration (sec)</dt>
        <dd class="col-sm-9">@Model.DurationSeconds</dd>
        <dt class="col-sm-3">Resolution</dt>
        <dd class="col-sm-9">@Model.WidthPx × @Model.HeightPx</dd>
    </dl>
}
else if (Model.Type == "Book")
{
    <dl class="row">
        <dt class="col-sm-3">Authors</dt>
        <dd class="col-sm-9">@Model.Authors</dd>
        <dt class="col-sm-3">Pages</dt>
        <dd class="col-sm-9">@Model.Pages</dd>
        <dt class="col-sm-3">Format</dt>
        <dd class="col-sm-9">@Model.FormatName</dd>
        <dt class="col-sm-3">Publication year</dt>
        <dd class="col-sm-9">@Model.PublicationYear</dd>
    </dl>
}
else if (Model.Type == "Article")
{
    <dl class="row">
        <dt class="col-sm-3">Published</dt>
        <dd class="col-sm-9">@Model.PublishedAt?.ToString("yyyy-MM-dd")</dd>
        <dt class="col-sm-3">Source</dt>
        <dd class="col-sm-9"><a href="@Model.SourceUrl" target="_blank" rel="noopener">@Model.SourceUrl</a></dd>
    </dl>
}

<div class="mt-3">
    @if (User.IsAuthenticated())
    {
        <a href="#"
           class="btn btn-success me-2"
           data-modal-url="@Url.Action("Edit", "Materials", new { id = Model.Id })"
           data-modal-title="Edit material">Edit</a>

        <form asp-action="Delete"
              asp-route-id="@Model.Id"
              method="post"
              class="d-inline"
              asp-antiforgery="true"
              onsubmit="return confirm('Delete this material?');">
            <button type="submit" class="btn btn-danger me-2">Delete</button>
        </form>
    }

    <a class="btn btn-outline-secondary" asp-action="Index">Back to list</a>
</div>